<!doctype html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="main.css" rel="stylesheet">

<title>tsk binary format overview</title>
</head>

<body>
<header>
<h1><a href="/">tsk</a></h1>
</header>

<main>
<div id="toc">
<h2>Contents</h2>
<ul>
<li><a href="#description-language-grammar">Description language grammar</a>
</ul>
</div>

<h2>Binary format overview</h2>
<p>Documentation for the tsk binary formats is generated directly from the code that defines the encoder/decoder, so that the documentation stays in sync.</p>
<p>The binary formats are documented using a description language, which is informally explained here.
The intent is to provide enough information for third parties to implement their own encoders and decoders.</p>

<h3 id="description-language-grammar"><a href="#description-language-grammar">Description language grammar</a></h3>
<pre>
<a id="grammar-primitive-definition" href="#grammar-primitive-definition">primitive-definition</a> ::= 'prim' <a href="#grammar-type-name">&lt;type-name&gt;</a> <a href="#grammar-name">&lt;name&gt;</a>* 'is' <a href="#grammar-string">&lt;string&gt;</a>

<a id="grammar-type-definition" href="#grammar-type-definition">type-definition</a> ::= 'type' <a href="#grammar-type-name">&lt;type-name&gt;</a> <a href="#grammar-name">&lt;name&gt;</a>* '=' <a href="#grammar-type">&lt;type&gt;</a>

<a id="grammar-type-name" href="#grammar-type-name">type-name</a> ::= [A-Z] [A-Za-z0-9]*
<a id="grammar-name" href="#grammar-name">name</a> ::= [a-z] [A-Za-z0-9]*

<a id="grammar-type" href="#grammar-type">type</a> ::= <a href="#grammar-type-application">&lt;type-application&gt;</a> | <a href="#grammar-type-match">&lt;type-match&gt;</a>
<a id="grammar-type-application" href="#grammar-type-application">type-application</a> ::= <a href="#grammar-type-atom">&lt;type-atom&gt;</a> <a href="#grammar-type-atom">&lt;type-atom&gt;</a>*
<a id="grammar-type-atom" href="#grammar-type-atom">type-atom</a> ::= <a href="#grammar-type-record">&lt;type-record&gt;</a> | <a href="#grammar-type-literal">&lt;type-literal&gt;</a> | '(' <a href="#grammar-type">&lt;type&gt;</a> ')'

<a id="grammar-type-record" href="#grammar-type-record">type-record</a> ::= '{' (<a href="#grammar-type-record-item">&lt;type-record-item&gt;</a> (',' <a href="#grammar-type-record-item">&lt;type-record-item&gt;</a>)*)? '}'
<a id="grammar-type-record-item" href="#grammar-type-record-item">type-record-item</a> ::= <a href="#grammar-name">&lt;name&gt;</a> ':' <a href="#grammar-type">&lt;type&gt;</a>

<a id="grammar-type-literal" href="#grammar-type-literal">type-literal</a> ::= <a href="#grammar-int">&lt;int&gt;</a> | <a href="#grammar-string">&lt;string&gt;</a>
<a id="grammar-int" href="#grammar-int">int</a> ::= '-'? [0-9]+
<a id="grammar-string" href="#grammar-string">string</a> ::= '"' ([^"] | '\' '"')* '"'

<a id="grammar-type-match" href="#grammar-type-match">type-match</a> ::= 'match' <a href="#grammar-type">&lt;type&gt;</a> '{' (<a href="#grammar-type-match-item">&lt;type-match-item&gt;</a> (',' <a href="#grammar-type-match-item">&lt;type-match-item&gt;</a>)*)? '}'
<a id="grammar-type-match-item" href="#grammar-type-match-item">type-match-item</a> ::= <a href="#grammar-type-match-pattern">&lt;type-match-pattern&gt;</a> '=>' <a href="#grammar-type">&lt;type&gt;</a>
<a id="grammar-type-match-pattern" href="#grammar-type-match-pattern">type-match-pattern</a> ::= <a href="#grammar-type-literal">&lt;type-literal&gt;</a>


</pre>
</main>
</body>
</html>

